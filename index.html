<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shotshell Calculator</title>
©Cable_x90
<h1 class="text-center" style="color: #a73a35;">Shotshell Calculator</h1>

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="bootstrap-5.3.3/css/bootstrap.css">

<!-- Eigene Styles -->
<link rel="stylesheet" href="style.css">

<!-- Manifest -->
<link rel="manifest" href="manifest.json">

<!-- Theme -->
<meta name="theme-color" content="#0dcaf0">

<!-- Favicons -->
<link rel="icon" href="img/icon-192.png" sizes="192x192" type="image/png">
<link rel="icon" href="img/icon-512.png" sizes="512x512" type="image/png">
<link rel="shortcut icon" href="img/icon-192.png" type="image/png">
</head>

<body class="bg-dark text-black">

<main class="text-center my-2">
  <img src="img/shell.png" width="260" height="180">
  <h1 class="text-info fw-bold fs-5">Shot Size</h1>  
</main>

<!-- Länder Dropdown -->
<div class="dropdown mb-2 compact-slider">
  <button class="btn btn-info dropdown-toggle w-100" type="button" id="countryDropdown" data-bs-toggle="dropdown" aria-expanded="false">
    EU
  </button>
  <ul class="dropdown-menu w-100" aria-labelledby="countryDropdown">
    <li><a class="dropdown-item" href="#" data-country="eu">EU</a></li>
    <li><a class="dropdown-item" href="#" data-country="italy">Italy</a></li>
    <li><a class="dropdown-item" href="#" data-country="uk">UK</a></li>
    <li><a class="dropdown-item" href="#" data-country="us">USA</a></li>
  </ul>
</div>

<!-- Schrotgröße Slider -->
<div class="compact-slider">
  <output id="mmOutput" class="d-block text-center fw-bold text-info fs-6"></output>
  <input type="range" class="form-range" min="0" max="37" value="0" id="mmSlider">
</div>

<!-- Länder Tabelle -->
<div class="compact-table">
  <table class="table table-striped table-dark table-sm" id="sliderTable">
    <thead>
      <tr>
        <th>Country</th>
        <th>No.</th>
        <th>mm</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<h1 class="text-warning fw-bold fs-5 text-center my-2">Shell Load</h1>  

<!-- Load Slider -->
<div class="compact-slider">
  <output id="loadOutput" class="d-block text-center fw-bold text-warning fs-6"></output>
  <input type="range" class="form-range" min="0" max="7" value="0" id="loadSlider">
</div>

<!-- Speed Slider -->
<div class="compact-slider">
  <output id="speedOutput" class="d-block text-center fw-bold text-warning fs-6"></output>
  <input type="range" class="form-range" min="350" max="450" step="10" value="390" id="speedSlider">
</div>

<!-- Total Energy Anzeige -->
<div id="totalEnergyDisplay" class="text-center text-warning fw-bold fs-6 mb-3">
  Total Energy: 0 J
</div>

<!-- Material Tabelle -->
<div class="compact-table">
  <table class="table table-striped table-dark table-sm" id="loadTable">
    <thead>
      <tr>
        <th>Material</th>
        <th>Pellets</th>
        <th>Energy/Pellet</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<!-- PATTERN SIMULATOR -->
<div class="compact-table text-center mt-3">
  <h2 class="text-danger fs-5 fw-bold">Pattern Simulator</h2>

  <!-- Material Dropdown -->
  <div class="dropdown mb-2 compact-slider">
    <button class="btn btn-danger dropdown-toggle w-100" type="button" id="materialDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      Lead
    </button>
    <ul class="dropdown-menu w-100" aria-labelledby="materialDropdown">
      <li><a class="dropdown-item" href="#" data-material="Lead">Lead</a></li>
      <li><a class="dropdown-item" href="#" data-material="Steel">Steel</a></li>
      <li><a class="dropdown-item" href="#" data-material="Copper">Copper</a></li>
      <li><a class="dropdown-item" href="#" data-material="Bismuth">Bismuth</a></li>
      <li><a class="dropdown-item" href="#" data-material="Tungsten">Tungsten</a></li>
    </ul>
  </div>

  <!-- Animal Dropdown -->
  <div class="dropdown mb-2 compact-slider">
    <button class="btn btn-danger dropdown-toggle w-100" type="button" id="animalDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      Pheasant
    </button>
    <ul class="dropdown-menu w-100" aria-labelledby="animalDropdown">
      <li><a class="dropdown-item" href="#" data-animal="img/pheasant.png">Pheasant</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/pigeon.png">Pigeon</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/crow.png">Crow</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/goose.png">Goose</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/duck.png">Duck</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/fox.png">Fox</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/coyote.png">Coyote</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/golden-jackal.png">Golden Jackal</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/hare.png">Hare</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/rabbit.png">Rabbit</a></li>
      <li><a class="dropdown-item" href="#" data-animal="img/squirrel.png">Squirrel</a></li>
    </ul>
  </div>

  <!-- Choke Dropdown -->
  <div class="dropdown mb-2 compact-slider">
    <button class="btn btn-danger dropdown-toggle w-100" type="button" id="chokeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
      Cylinder
    </button>
    <ul class="dropdown-menu w-100" aria-labelledby="chokeDropdown">
      <li><a class="dropdown-item" href="#" data-choke="Cylinder">Cylinder</a></li>
      <li><a class="dropdown-item" href="#" data-choke="IC">Improved Cylinder</a></li>
      <li><a class="dropdown-item" href="#" data-choke="Modified">Modified</a></li>
      <li><a class="dropdown-item" href="#" data-choke="Full">Full</a></li>
    </ul>
  </div>

<!-- Distance -->
<div class="compact-slider">
  <output id="distanceLabel" class="d-block text-danger fw-bold mb-1">20 m</output>
  <input id="distanceSlider" type="range" min="5" max="60" step="1" value="20" class="form-range mb-2">
</div>


  <!-- SVG Shot Pattern -->
  <div class="pattern-wrapper">
    <svg id="patternSVG" width="330" height="330" style="background:#222; border-radius:12px">
      <image id="animalImage" href="img/pheasant.png" x="110" y="110" width="110" height="110" opacity="0.9"></image>
      <circle id="chokeRing" cx="165" cy="165" r="80" stroke="#0dcaf0" stroke-width="2" fill="none"></circle>
      <g id="pelletGroup"></g>
    </svg>
  </div>
</div>


<!-- Bootstrap JS + eigenes Script -->
<script src="bootstrap-5.3.3/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js')
    .then(() => console.log("Service Worker registered"))
    .catch(err => console.log("SW registration failed:", err));
}
</script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('./sw.js').then(reg => {
    console.log("Service Worker registered");
    reg.onupdatefound = () => {
      const newSW = reg.installing;
      newSW.onstatechange = () => {
        if (newSW.state === 'installed' && navigator.serviceWorker.controller) {
          console.log("New SW installed, reloading page");
          location.reload();
        }
      };
    };
  }).catch(err => console.log("SW registration failed:", err));
}
</script>



</body>
</html>
